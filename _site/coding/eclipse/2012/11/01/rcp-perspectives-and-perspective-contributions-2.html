<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>RCP: Perspectives and Perspective Contributions</title>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="/css/syntax.css">
        <script src="/css/jquery.js"></script>
        <link rel="stylesheet" href="/css/bootstrap.css">
		<link rel="stylesheet" href="/css/bootstrap-theme.css">		
		<script src="/css/bootstrap.js"></script>
		<link href="/css/additional.css" rel="stylesheet">
		<link rel="stylesheet" href="http://yandex.st/highlightjs/7.4/styles/default.min.css">
		<script src="http://yandex.st/highlightjs/7.4/highlight.min.js"></script>
		<link rel="alternate" type="application/rss+xml" title="AndyDunke.net RSS Feed" href="http://andydunkel.net/rss.xml" /> 
    </head>
    <body>
    
    <div class="container">
    	<div class="col-md-6">
	    	<a href="/index.html">
    			<img src="/assets/logo.png" alt="logo" width="450" height="135">
    		</a>
    	</div>
    	<div class="col-md-6" style="padding:40px">
	    	<script type="text/javascript"><!--
			google_ad_client = "ca-pub-1137550895446814";
			/* 468x60, Erstellt 21.03.09 */
			google_ad_slot = "2357680339";
			google_ad_width = 468;
			google_ad_height = 60;
			//-->
			</script>
			<script type="text/javascript"
			src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
			</script>    	
    	</div>
    </div>

    <!-- Fixed navbar -->
    <div class="navbar navbar-default">
      <div class="container">
	     
        <div class="navbar-header">	
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          
          <a class="navbar-brand" href="/index.html">Home</a>
        </div>
       
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/blog.html">Blog</a></li>
            
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Projekte <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/websites.html">Webseiten</a></li>
                <li><a href="/software.html">Software</a></li>
              </ul>
            </li>
            
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Sonstiges <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/documents.html">Dokumente</a></li>
              </ul>
            </li>
            
            <li><a href="/about.html">Pers√∂nliches</a></li>
            <li><a href="/contact.html">Kontakt</a></li>            
            <li><a href="/imprint.html">Impressum</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
          	<li>
          	<form action="http://www.google.de" id="cse-search-box" class="navbar-form navbar-left" role="search">
			  <div class="form-group">
			    <input type="hidden" name="cx" value="partner-pub-1137550895446814:8857383477" />
			    <input type="hidden" name="ie" value="UTF-8" />
			    <input type="text" name="q" size="20" class="form-control"/>
			  </div>
			    <input type="submit" name="sa" value="Search" class="btn btn-default"/>			
			  </form>
				<script type="text/javascript" src="http://www.google.de/coop/cse/brand?form=cse-search-box&amp;lang=de"></script>
          	</li>            
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">

        <div class="row">
    	<div class="col-md-9">

			<h2>RCP: Perspectives and Perspective Contributions</h2>
			<p class="meta">01 Nov 2012</p>
			
			<div class="post">
			<p>Note: I put the example project in a ZIP file, you can use that to have a look to the actual code, <a href="http://andydunkel.net/assets/wp-custom/com.da.perspectives.example.zip">Download</a>.</p>

<h3>Start</h3>

<p>In the first step, we create a sample plugin project (Mail project):</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/1.png" alt="1"></p>

<h3>Make the perspective bar visible</h3>

<p>This needs to be done in the ApplicationWorkbenchWindowAdvisor.java class, in the preWindowOpen method:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">IWorkbenchWindowConfigurer configurer = getWindowConfigurer();
configurer.setShowPerspectiveBar(true);
</code></pre></div>
<p><img src="http://andydunkel.net/assets/uploads/2012/11/2.png" alt="2"></p>

<h3>Create another plugin with perspective</h3>

<p>We create another plugin project in the workspace, select &quot;No&quot; for &quot;Rich Client Application&quot; (no template in the next step):</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/3.png" alt="3"></p>

<p>After the project is created, open the &quot;plugin.xml&quot; file of the new plugin project. We create a new &quot;org.eclipse.ui.perspectives&quot; extension point:</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/4.png" alt="4"></p>

<p>To create the perspective class, we click on the &quot;class&quot; link and create the class:</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/5.png" alt="5"></p>

<p>In our main projects &quot;plugin.xml&quot; add our new plugin project as dependency:</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/6.png" alt="6"> <img src="http://andydunkel.net/assets/uploads/2012/11/7.png" alt="7"></p>

<p>If we switch to this perspective, the window will become empty. We want an view appear in this perspective. In the example project, we create an &quot;ImageView&quot; and define the view in the &quot;plugin.xml&quot;:</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/8.png" alt="8"></p>

<p>After that, we have to add the code which defines our perspective:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">@Override
public void createInitialLayout(IPageLayout layout) {
  String editorArea = layout.getEditorArea();
  layout.setEditorAreaVisible(false);

  layout.addStandaloneView(ImageView.ID,  false, IPageLayout.TOP, 1, editorArea);
}
</code></pre></div>
<h3>Contribute to an existing perspective</h3>

<p>OK, different example: We now want to contribute our ImageView to an existing perspective. For that, we add to our contribution project an &quot;perpectiveExtensions&quot; extension point:</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/9.png" alt="9"></p>

<p>As &quot;targetID&quot; enter the ID of our main perspective in the &quot;main.gui&quot; project. Now we add a view ot our perpective extension. Right click -&gt; New -&gt; view:</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/a.png" alt="a"></p>

<p>When the application starts, the ImageViewer will appear next to the message view:</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/b.png" alt="b"></p>

<h3>Contribute to the toolbar</h3>

<p>Now we want, that our contribution plugin also contributes a toolbar and menu items to our main application. For that, we have to define an &quot;org.eclipse.ui.actionSets&quot; extension point. Now we have to add the action set to our perspectiveExtension.</p>

<p>The &quot;plugin.xml&quot; extension points should now look something like this:</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/c.png" alt="c"></p>

<p>If it does not show up, make sure you entered a correct &quot;toolbarPath&quot; in the definition of your actionSet action:</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/d.png" alt="d"></p>

<p>If everything is right, the new icon should appear in the toolbar of our main application.</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/e.png" alt="e"></p>

<h3>Remove an existing item from the toolbar</h3>

<p>If we switch to our new perspective, the image viewer, we are able to open new message views via toolbar and the menu. However, we do not want this. So we need to get rid of the menu items and toolbar items. The perspectiveExtension allows us to hide items, too. To do this, we add another perspectiveExtension for our perspective for the image view:</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/g.png" alt="g"></p>

<p>Now we add &quot;hiddenMenuItems&quot; and &quot;hiddenToolBarItems&quot;:</p>

<p><img src="http://andydunkel.net/assets/uploads/2012/11/h.png" alt="h"></p>

<p>Basically we just enter the IDs of the commands here. If we switch now to our perspective, the toolbar items defined should be invisible.</p>

			</div>
			
			<script type="text/javascript"><!--
			google_ad_client = "ca-pub-1137550895446814";
			/* 468x60, Erstellt 21.03.09 */
			google_ad_slot = "2357680339";
			google_ad_width = 468;
			google_ad_height = 60;
			//-->
			</script>
			<script type="text/javascript"
			src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
			</script>
    	</div>
    	
    	<div class="col-md-3" align="center">  
    		<div class="panel panel-default sideBarTop">    			
	    		<script id='fb7sm2s'>(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//api.flattr.com/button/view/?uid=mengenleere&button=compact&url='+encodeURIComponent(document.URL);f.title='Flattr';f.height=20;f.width=110;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fb7sm2s');</script>    		
    		</div>
    	  	
    		<div class="panel panel-default">
	    		<div class="panel-body">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
				<!-- Seitenleiste -->
				<ins class="adsbygoogle"
				     style="display:inline-block;width:160px;height:600px"
				     data-ad-client="ca-pub-1137550895446814"
				     data-ad-slot="1909195079"></ins>
				<script>
				(adsbygoogle = window.adsbygoogle || []).push({});
				</script>		    	
	    		</div>
    		</div>
    	</div>    	
    	
    </div>			

<hr>

<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'andydunkelnet'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>
    
<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(["trackPageView"]);
  _paq.push(["enableLinkTracking"]);

  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + "://piwik.ekiwi.de/";
    _paq.push(["setTrackerUrl", u+"piwik.php"]);
    _paq.push(["setSiteId", "2"]);
    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
    g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Piwik Code -->

    </body>
</html>
