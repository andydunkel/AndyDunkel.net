<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Signing Firemonkey Applications on OSX</title>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="/css/syntax.min.css">
        <script src="/css/jquery.min.js"></script>
        <link rel="stylesheet" href="/css/bootstrap.min.css">
		<link rel="stylesheet" href="/css/bootstrap-theme.min.css">		
		<script src="/css/bootstrap.min.js"></script>
		<link href="/css/additional.min.css" rel="stylesheet">
		<link rel="alternate" type="application/rss+xml" title="AndyDunkel.net RSS Feed" href="http://andydunkel.net/rss.xml" /> 
		
		<!-- Begin Cookie Consent plugin by Silktide - http://silktide.com/cookieconsent -->
	    <script type="text/javascript">
		    window.cookieconsent_options = {"message":"Wir verwenden Cookies auf der Website, um Ihren Besuch effizienter zu machen und Ihnen Benutzerfreundlichkeit bieten zu können.","dismiss":"OK","learnMore":"Mehr Informationen","link":"http://ekiwi.de/datenschutzerklaerung.htm","theme":"light-bottom"};
		</script>
		
		<script type="text/javascript" src="http://www.andydunkel.net/css/cookieconsent/cookieconsent.min.js"></script>
		<!-- End Cookie Consent plugin -->
		
    </head>
    <body>
    
    <div class="container">
    	<div class="col-md-4">
	    	<a href="/index.html">
    			<img src="/assets/logo.png" alt="logo" width="300" height="113">
    		</a>
    	</div>
    	<div class="col-md-8" style="padding:20px">
			<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
			<!-- eKiwiTop -->
			<ins class="adsbygoogle"
			     style="display:inline-block;width:728px;height:90px"
			     data-ad-client="ca-pub-1137550895446814"
			     data-ad-slot="2555817477"></ins>
			<script>
			(adsbygoogle = window.adsbygoogle || []).push({});
			</script> 		
    	</div>
    </div>

    <!-- Fixed navbar -->
    <div class="navbar navbar-default">
      <div class="container">
	     
        <div class="navbar-header">	
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          
          <a class="navbar-brand" href="/index.html">Home</a>
        </div>
       
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/blog.html">Blog</a></li>
            
            <li class="dropdown">
              <a href="/projects.html" class="dropdown-toggle" data-toggle="dropdown">Projekte <b class="caret"></b></a>
              <ul class="dropdown-menu">
	            <li class="dropdown-header">Webseiten</li>
                <li><a href="http://ekiwi.de">eKiwi.de</a></li>
                <li><a href="http://acapio.de">Acapio.de</a></li>
                <li><a href="http://da-software.de">DA-Software.de</a></li>
                <li class="divider"></li>
	               <li class="dropdown-header">Blogs</li>
				        <li><a href="http://ekiwi-blog.de">eKiwi Blog</a></li>				
                <li class="divider"></li>
                <li class="dropdown-header">Sonstiges</li>
                <li><a href="/documents.html">Dokumente</a></li>
               </ul>
            </li>           
            
            <li class="dropdown">
              <a href="/software.html" class="dropdown-toggle" data-toggle="dropdown">Software <b class="caret"></b></a>
              <ul class="dropdown-menu">
	            <li class="dropdown-header">OpenSource</li>  
	            <li><a href="https://github.com/andydunkel?tab=repositories">GitHub Projekte</a></li>
	            <li class="divider"></li>
	            <li class="dropdown-header">Kommerzielle Software</li>
                <li><a href="http://da-software.de/daform/daform_start.htm">DA-FormMaker</a></li>
                <li><a href="http://da-software.de/dabestell/index.htm">DA-BestellFormular</a></li>
                <li><a href="http://da-software.de/daquiz/index.htm">DA-QuizMaker</a></li>
                <li><a href="http://da-software.de/dahtaccess/dahtaccess_start.htm">DA-HtAccessManager</a></li>                
              </ul>
            </li>
            
            <li class="dropdown">
              <a href="/guides/index.html" class="dropdown-toggle" data-toggle="dropdown">Anleitungen / Tutorials <b class="caret"></b></a>
              <ul class="dropdown-menu">
	            <li><a href="/guides/repair/index.html">Reparaturanleitungen</a></li>
              <li><a href="/guides/software/index.html">Software</a></li>              
              </ul>
            </li>
                        
            
            <li><a href="/about.html">Persönliches</a></li>
            <li><a href="/contact.html">Kontakt</a></li>            
            <li><a href="/imprint.html">Impressum</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
          	<li>
          	<form action="http://www.google.de" id="cse-search-box" class="navbar-form navbar-left" role="search">
			  <div class="form-group">
			    <input type="hidden" name="cx" value="partner-pub-1137550895446814:8857383477" />
			    <input type="hidden" name="ie" value="UTF-8" />
			    <input type="text" name="q" size="20" class="form-control"/>
			  </div>
			    <input type="submit" name="sa" value="Search" class="btn btn-default"/>			
			  </form>
				<script type="text/javascript" src="http://www.google.de/coop/cse/brand?form=cse-search-box&amp;lang=de"></script>
          	</li>            
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">

        <div class="row">
    	<div class="col-md-9">

			<h2>Signing Firemonkey Applications on OSX</h2>
			<p class="meta">22 Jan 2014</p>
			
			<div class="post">
			<p>Some time ago I started porting my application <a href="http://da-software.de/daform/daform_start.htm">DA-FormMaker</a> for the Mac. After finishing the development, the app needs to be signed with the Developer ID. Otherwise your users will end up with some message like:</p>

<p><img src="http://andydunkel.net/assets/uploads/2014/01/signing/sign0.png" alt=""></p>

<p>OK its german, but it means: I don&#39;t know that developer and I will not start that application. So the app needs to be signed. Fair enough.</p>

<p>It took me some time to find out the steps needed for that, thats the reason why I am documenting it here. :-)</p>

<p><em>Note: That procedure here is not for App Store applications.</em></p>

<h2>Preparations</h2>

<p>OK lets start!</p>

<p>The first thing is, you need to have <a href="https://developer.apple.com/">Mac Developer Account</a> for 100$ a year to get the certificates to sign the application.</p>

<p>If you have a developer account you have to create the developer certificates. Easiest way to do that is the XCode Organizer:</p>

<p><img src="http://andydunkel.net/assets/uploads/2014/01/signing/sign1.png" alt=""></p>

<p>Click on your Mac and &quot;Add to member center&quot;. The next dialog will ask you if you want to create/request the certificates needed.</p>

<p>The procedures takes some time and it told me that the process is still ongoing and I&#39;d like to refresh the certificates in the accounts section of the Xcode preferences. OK lets do that.</p>

<p>If you have not done that before, enter your Apple ID first. Then hit the refresh button. It should show the certificates that are not installed:</p>

<p><img src="http://andydunkel.net/assets/uploads/2014/01/signing/sign2.png" alt=""></p>

<p>Install the certificates in XCode. I am not 100% sure if that step it really needed. In order to sign the Firemonkey application via command line, we have to install the certificates in our key chain. </p>

<p>To do that, we have to download the cerficate from the certificates section in the developer account:</p>

<p><img src="http://andydunkel.net/assets/uploads/2014/01/signing/sign3.png" alt=""></p>

<p>Save the file to your local disk and open &quot;Keychain Access&quot;. Select &quot;File&quot; -&gt; &quot;Import Items&quot;. Now select the *.cer file you just downloaded and the destination. I choosed system. The certificate should now show up in the list:</p>

<p><img src="http://andydunkel.net/assets/uploads/2014/01/signing/sign4.png" alt=""></p>

<p>If you right click and select &quot;Get Info&quot; on the certificate, you see the properties of the certificate:</p>

<p><img src="http://andydunkel.net/assets/uploads/2014/01/signing/sign5.png" alt=""></p>

<p>You can copy the common name here, which we will later use on the command line to sign the application.</p>

<h2>Firemonkey</h2>

<p>The next step is the release build of your Firemonkey Application. Select the settings for the build and compile the application.</p>

<p><img src="http://andydunkel.net/assets/uploads/2014/01/signing/sign6.png" alt=""></p>

<p>After complilation the application should be on your Macs file system in /Users/username/RASPASever/scratch-dir/...</p>

<p>If the application runs correctly then its time to finally sign the application.</p>

<h2>Signing</h2>

<p>To do that open a console and switch to the applications folder. Sign the application with the following command:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">codesign -f -s &quot;Common Name&quot; -v &quot;application_name.app&quot; --deep
</code></pre></div>
<p>Enter the common name mentioned above and the application name. Here is an example:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">da$ codesign -f -s &quot;Developer ID Application: Andy Dunkel&quot; -v &quot;daform.app&quot; --deep
daform.app: signed bundle with Mach-O thin (i386) [daform]
</code></pre></div>
<p>You can check the validity of the signing with the following command:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">spctl --verbose=4 --assess --type execute DA-yourapp
</code></pre></div>
<p>It should return something like:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DA-FormMaker.app: accepted
source=Developer ID
</code></pre></div>
<p>I first run into a problem. The app was not signed correctly. It told me that &quot;my.app is damaged and can&#39;t be opened. You should move it to the trash.&quot;. And the check above returned:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DA-FormMaker.app: a sealed resource is missing or invalid
</code></pre></div>
<p>The problem? Turned out that I made a mistake and had other files in the &quot;MacOS&quot; folder of the bundle. I moved those to &quot;Resources&quot; and everything was OK.</p>

<p><strong>Congratulations: After that your app is signed with your developer id!</strong></p>

			</div>
			
			<br>
			
			<div class="panel panel-default">
			  <div class="panel-heading">Support</div>
  				<div class="panel-body">
					<div class="row">
					  <div class="col-md-2">					   				  				
						<script id='fbzr7vy'>(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//button.flattr.com/view/?fid=4xoqz7&button=compact&url='+encodeURIComponent(document.URL);f.title='Flattr';f.height=20;f.width=110;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fbzr7vy');</script>
					  </div>
					  <div class="col-md-2">

<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="9UGVE4ZFX4UYS">
<input type="image" src="https://www.paypalobjects.com/en_GB/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal – The safer, easier way to pay online.">
<img alt="" border="0" src="https://www.paypalobjects.com/de_DE/i/scr/pixel.gif" width="1" height="1">
</form>


					  </div>									    
		  	       </div>
			   </div>
			 </div>

			
			 <div class="panel panel-default">
			 	<div class="panel-heading">Verwandte Artikel:</div>
				<div class="panel-body">
				
				   <li class="list-unstyled"><a href="http://andydunkel.net/delphi/firemonkey/2014/03/05/delphi_and_firemonkey_experience.html" title="My experiences with Delphi XE and Firemonkey">My experiences with Delphi XE and Firemonkey</a></li>
				
				   <li class="list-unstyled"><a href="http://andydunkel.net/delphi/osx/2015/04/15/code_signing_problems_with_delphi.html" title="Code signing problems with Delphi: Entitlements.plist">Code signing problems with Delphi: Entitlements.plist</a></li>
				
				   <li class="list-unstyled"><a href="http://andydunkel.net/delphi/firemonkey/2014/01/28/code_signing_problems_with_delphi_xe4_and_mavericks.html" title="Code signing problems with Delphi XE4 Mavericks">Code signing problems with Delphi XE4 Mavericks</a></li>
				
				   <li class="list-unstyled"><a href="http://andydunkel.net/delphi/lazarus/2016/01/06/delphi_lazarus.html" title="Moving from Delphi to Lazarus">Moving from Delphi to Lazarus</a></li>
				
				   <li class="list-unstyled"><a href="http://andydunkel.net/delphi/2015/02/04/firemonkey_switchable_graphics_problem.html" title="Delphi XE / Firemonkey - Problem with switchable graphic card">Delphi XE / Firemonkey - Problem with switchable graphic card</a></li>
				
				   <li class="list-unstyled"><a href="http://andydunkel.net/coding/tools/2014/02/04/check_code_signing_of_osx_applications.html" title="Check code signing of applications on OSX">Check code signing of applications on OSX</a></li>
				
				   <li class="list-unstyled"><a href="http://andydunkel.net/mac/2013/06/19/backslash-unter-osx.html" title="Backslash unter OSX">Backslash unter OSX</a></li>
				
				</div>
			</div>
			
						
			<script type="text/javascript"><!--
			google_ad_client = "ca-pub-1137550895446814";
			/* 468x60, Erstellt 21.03.09 */
			google_ad_slot = "2357680339";
			google_ad_width = 468;
			google_ad_height = 60;
			//-->
			</script>
			<script type="text/javascript"
			src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
			</script>
    	</div>
    	
    	<div class="col-md-3" align="center">  
    	  	
    		<div class="panel panel-default">
	    		<div class="panel-body">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
				<!-- Seitenleiste -->
				<ins class="adsbygoogle"
				     style="display:inline-block;width:160px;height:600px"
				     data-ad-client="ca-pub-1137550895446814"
				     data-ad-slot="1909195079"></ins>
				<script>
				(adsbygoogle = window.adsbygoogle || []).push({});
				</script>		    	
	    		</div>
    		</div>
    	</div>    	
    	
    </div>			

<hr>

<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'andydunkelnet'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>
    
<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(["trackPageView"]);
  _paq.push(["enableLinkTracking"]);

  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + "://piwik.ekiwi.de/";
    _paq.push(["setTrackerUrl", u+"piwik.php"]);
    _paq.push(["setSiteId", "2"]);
    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
    g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Piwik Code -->

    </body>
</html>
