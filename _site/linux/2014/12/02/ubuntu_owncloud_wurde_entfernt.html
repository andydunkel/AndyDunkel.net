<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Owncloud - automatische Deinstallation unter Ubuntu und Passwort zurücksetzen</title>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="/css/syntax.css">
        <script src="/css/jquery.js"></script>
        <link rel="stylesheet" href="/css/bootstrap.css">
		<link rel="stylesheet" href="/css/bootstrap-theme.css">		
		<script src="/css/bootstrap.js"></script>
		<link href="/css/additional.css" rel="stylesheet">
		<link rel="stylesheet" href="http://yandex.st/highlightjs/7.4/styles/default.min.css">
		<script src="http://yandex.st/highlightjs/7.4/highlight.min.js"></script>
		<link rel="alternate" type="application/rss+xml" title="AndyDunke.net RSS Feed" href="http://andydunkel.net/rss.xml" /> 
    </head>
    <body>
    
    <div class="container">
    	<div class="col-md-4">
	    	<a href="/index.html">
    			<img src="/assets/logo.png" alt="logo" width="450" height="135">
    		</a>
    	</div>
    	<div class="col-md-8" style="padding:40px">
			<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
			<!-- eKiwiTop -->
			<ins class="adsbygoogle"
			     style="display:inline-block;width:728px;height:90px"
			     data-ad-client="ca-pub-1137550895446814"
			     data-ad-slot="2555817477"></ins>
			<script>
			(adsbygoogle = window.adsbygoogle || []).push({});
			</script> 		
    	</div>
    </div>

    <!-- Fixed navbar -->
    <div class="navbar navbar-default">
      <div class="container">
	     
        <div class="navbar-header">	
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          
          <a class="navbar-brand" href="/index.html">Home</a>
        </div>
       
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/blog.html">Blog</a></li>
            
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Projekte <b class="caret"></b></a>
              <ul class="dropdown-menu">
	            <li class="dropdown-header">Webseiten</li>
                <li><a href="http://ekiwi.de">eKiwi.de</a></li>
                <li><a href="http://acapio.de">Acapio.de</a></li>
                <li><a href="http://da-software.de">DA-Software.de</a></li>
                <li class="divider"></li>
	            <li class="dropdown-header">Blogs</li>
				<li><a href="http://blog.ekiwi.de">eKiwi Blog</a></li>
              </ul>
            </li>
            
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Software <b class="caret"></b></a>
              <ul class="dropdown-menu">
	            <li class="dropdown-header">OpenSource</li>  
	            <li><a href="https://github.com/andydunkel?tab=repositories">GitHub Projekte</a></li>
	            <li class="divider"></li>
	            <li class="dropdown-header">Kommerzielle Software</li>
                <li><a href="http://da-software.de/daform/daform_start.htm">DA-FormMaker</a></li>
                <li><a href="http://da-software.de/dabestell/index.htm">DA-BestellFormular</a></li>
                <li><a href="http://da-software.de/daquiz/index.htm">DA-QuizMaker</a></li>
                <li><a href="http://da-software.de/dahtaccess/dahtaccess_start.htm">DA-HtAccessManager</a></li>
                
              </ul>
            </li>
            
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Sonstiges <b class="caret"></b></a>
              <ul class="dropdown-menu">

              </ul>
            </li>
            
            <li><a href="/about.html">Persönliches</a></li>
            <li><a href="/contact.html">Kontakt</a></li>            
            <li><a href="/imprint.html">Impressum</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
          	<li>
          	<form action="http://www.google.de" id="cse-search-box" class="navbar-form navbar-left" role="search">
			  <div class="form-group">
			    <input type="hidden" name="cx" value="partner-pub-1137550895446814:8857383477" />
			    <input type="hidden" name="ie" value="UTF-8" />
			    <input type="text" name="q" size="20" class="form-control"/>
			  </div>
			    <input type="submit" name="sa" value="Search" class="btn btn-default"/>			
			  </form>
				<script type="text/javascript" src="http://www.google.de/coop/cse/brand?form=cse-search-box&amp;lang=de"></script>
          	</li>            
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">

        <div class="row">
    	<div class="col-md-9">

			<h2>Owncloud - automatische Deinstallation unter Ubuntu und Passwort zurücksetzen</h2>
			<p class="meta">02 Dec 2014</p>
			
			<div class="post">
			<p>Das es unter Linux ab und zu mal etwas Gefrickel ist, diverse Dinge und Dienste einzurichten und in Betrieb zu halten ist ja nix neues. Für die Synchronisierung von Kontakten und Kalender verwende ich Owncloud. Dieses lief anfangs auf einem Raspberry Pi, mittlerweile auf einem etwas größeren Server der mit Ubuntu arbeitet.</p>

<p>Ich war auch einigermaßen froh, dass sich unter Ubuntu die Owncloud-Software direkt mit “apt-get install owncloud” einrichten ließ. Bis vor ein paar Tagen.
Da kam ich auf die Idee, dass man ja mal die neuesten Updates einspielen kann. Eigentlich Routine. 
Im Laufe der Einrichtung wurde mir dann lapidar mitgeteilt, dass in der installierten Version von Owncloud eine Sicherheitslücke vorhanden ist und man Owncloud deswegen einfach deinstalliert hat.</p>

<p><strong>Bravo!</strong></p>

<p>Der Aufruf im Browser brachte die Gewissheit, in der Tat war Owncloud einfach weg. IPhone und Thunderbird synchronisierten sich auch gleich brav und so leerten sich Kontakte und Kalender auf den Geräten. Auch war nicht klar, ob die Daten auch gleich mit “deinstalliert” worden sind.</p>

<p>Nachdem der erste Ärger verflogen war,  machte ich mich daran Owncloud neu zu installieren. Dies gelang auch recht flott. Allerdings begrüßte mich die neueste Version mit dem Assistenten zur Neueinrichtung. Im Besten Fall wären also alle Daten weg?</p>

<p>Zum Glück nicht.</p>

<h2>Daten einspielen</h2>

<p>Ob ich nur Glück hatte oder ob die Daten auch einfach hätten überschrieben werden können und damit weg wären, kann ich leider gar nicht mehr sagen. In jedem Fall lagen die bisherigen Daten unter:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">/var/lib/owncloud/data
</code></pre></div>
<p>Die neue Installation legte die Datenbank jedoch unter:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">/var/www/owncloud/data
</code></pre></div>
<p>an. Also habe ich einfach das bisherige Datenverzeichnis einfach über die neuen drüberkopiert. Die Datenbank wurde auch brav erkannt beim nächsten Aufruf. Inklusive der Option zum Datenbankupgrade auf die aktuelle Version. Hier sei noch erwähnt, dass ich SQLite als Datenbank verwende. Bei MySQL ist das nochmal etwas anders.</p>

<p>Allerdings konnte ich mich danach nicht mehr einloggen. Trotz richtiger Zugangsdaten.</p>

<h2>Passwort zurücksetzen</h2>

<p>Prinzipiell kann man zwar das Passwort via E-Mail zurücksetzen, allerdings habe ich bei meinem Account dummerweise keine E-Mail-Adresse hinterlegt. 
Zum Glück gibt es die Möglichkeit das Passwort auf der Kommandozeile zurückzusetzen. Hierfür wechselt man in das Owncloud-Verzeichnis:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">cd /var/www/owncloud/
</code></pre></div>
<p>Mit dem folgenden Befehl kann das Passwort neu gesetzt werden:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo ./occ user:resetpassword admin
</code></pre></div>
<p>Bei mir war die Datei standardmäßig “nicht ausführbar”, was zu einer Fehlermeldung führte. Hier hilft dann folgender Befehl weiter:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo chmod +x occ
</code></pre></div>
<h2>Fazit</h2>

<p>Auch wenn nun alles wieder lief, ist es natürlich sehr nervig, wenn Software einfach so ohne großartige Benutzerinteraktion bei einem Update deinstalliert wird. 
Für mich war es in erster Linie nervig, da nur ich die Synchronisation mit dem Server nutze. Wer das ganze für seine Familie oder gar professionell nutzt steht da erstmal recht dumm da und darf sich mit sicher schnell mit jeder Menge Supportanfragen herumärgern. Zumindest eine Abfrage ob die Software wirklich entfernt werden soll wäre hier hilfreich. </p>

			</div>
			
			<script type="text/javascript"><!--
			google_ad_client = "ca-pub-1137550895446814";
			/* 468x60, Erstellt 21.03.09 */
			google_ad_slot = "2357680339";
			google_ad_width = 468;
			google_ad_height = 60;
			//-->
			</script>
			<script type="text/javascript"
			src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
			</script>
    	</div>
    	
    	<div class="col-md-3" align="center">  
    		<div class="panel panel-default sideBarTop">    			
	    		<script id='fb7sm2s'>(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//api.flattr.com/button/view/?uid=mengenleere&button=compact&url='+encodeURIComponent(document.URL);f.title='Flattr';f.height=20;f.width=110;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fb7sm2s');</script>    		
    		</div>
    	  	
    		<div class="panel panel-default">
	    		<div class="panel-body">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
				<!-- Seitenleiste -->
				<ins class="adsbygoogle"
				     style="display:inline-block;width:160px;height:600px"
				     data-ad-client="ca-pub-1137550895446814"
				     data-ad-slot="1909195079"></ins>
				<script>
				(adsbygoogle = window.adsbygoogle || []).push({});
				</script>		    	
	    		</div>
    		</div>
    	</div>    	
    	
    </div>			

<hr>

<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'andydunkelnet'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>
    
<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(["trackPageView"]);
  _paq.push(["enableLinkTracking"]);

  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + "://piwik.ekiwi.de/";
    _paq.push(["setTrackerUrl", u+"piwik.php"]);
    _paq.push(["setSiteId", "2"]);
    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
    g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Piwik Code -->

    </body>
</html>
