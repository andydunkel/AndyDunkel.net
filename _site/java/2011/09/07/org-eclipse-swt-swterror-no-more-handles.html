<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>org.eclipse.swt.SWTError: No more handles</title>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="/css/syntax.css">
        <script src="/css/jquery.js"></script>
        <link rel="stylesheet" href="/css/bootstrap.css">
		<link rel="stylesheet" href="/css/bootstrap-theme.css">		
		<script src="/css/bootstrap.js"></script>
		<link href="/css/additional.css" rel="stylesheet">
		<link rel="stylesheet" href="http://yandex.st/highlightjs/7.4/styles/default.min.css">
		<script src="http://yandex.st/highlightjs/7.4/highlight.min.js"></script>
		<link rel="alternate" type="application/rss+xml" title="AndyDunke.net RSS Feed" href="http://andydunkel.net/rss.xml" /> 
    </head>
    <body>
    
    <div class="container">
    	<div class="col-md-6">
	    	<a href="/index.html">
    			<img src="/assets/logo.png" alt="logo" width="450" height="135">
    		</a>
    	</div>
    	<div class="col-md-6" style="padding:40px">
	    	<script type="text/javascript"><!--
			google_ad_client = "ca-pub-1137550895446814";
			/* 468x60, Erstellt 21.03.09 */
			google_ad_slot = "2357680339";
			google_ad_width = 468;
			google_ad_height = 60;
			//-->
			</script>
			<script type="text/javascript"
			src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
			</script>    	
    	</div>
    </div>

    <!-- Fixed navbar -->
    <div class="navbar navbar-default">
      <div class="container">
	     
        <div class="navbar-header">	
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          
          <a class="navbar-brand" href="/index.html">Home</a>
        </div>
       
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/blog.html">Blog</a></li>
            
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Projekte <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/websites.html">Webseiten</a></li>
                <li><a href="/software.html">Software</a></li>
              </ul>
            </li>
            
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Sonstiges <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/documents.html">Dokumente</a></li>
              </ul>
            </li>
            
            <li><a href="/about.html">Persönliches</a></li>
            <li><a href="/contact.html">Kontakt</a></li>            
            <li><a href="/imprint.html">Impressum</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
          	<li>
          	<form action="http://www.google.de" id="cse-search-box" class="navbar-form navbar-left" role="search">
			  <div class="form-group">
			    <input type="hidden" name="cx" value="partner-pub-1137550895446814:8857383477" />
			    <input type="hidden" name="ie" value="UTF-8" />
			    <input type="text" name="q" size="20" class="form-control"/>
			  </div>
			    <input type="submit" name="sa" value="Search" class="btn btn-default"/>			
			  </form>
				<script type="text/javascript" src="http://www.google.de/coop/cse/brand?form=cse-search-box&amp;lang=de"></script>
          	</li>            
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">

        <div class="row">
    	<div class="col-md-9">

			<h2>org.eclipse.swt.SWTError: No more handles</h2>
			<p class="meta">07 Sep 2011</p>
			
			<div class="post">
			<p>In our current project we came across the following error, when we opened multiple of our editors in a RCP application: </p>

<p><img src="http://andydunkel.net/assets/uploads/2011/09/image5.png" alt="image"></p>

<p>Never seen this one before. Most sources in the internet mentioned something about “not disposing SWT resources”. However this happened when we opened the editor. So a “not disposed” problem was very unlikely.</p>

<p>Strange enough, all other applications in the system started to behave strange. No new windows could be opened, the clipboard stopped working …</p>

<p>Well, what&#39;s the problem then? </p>

<p>Simple enough, the only bad thing we did was creating too much controls in our editors. We have a “MultiPageEditor” in Eclipse with a lot of controls in it for configuring servo drives.</p>

<p>Each control in Windows uses a handle. Windows XP can manage 10000 user handles for each process and total 32000 for each desktop. </p>

<p>Each of our editors added about 1100 handles to the list. After opening 4-5 editors on my machine, the exception occurred.</p>

<p>Here is some sample code to reproduce the problem, it just creates 10.000 buttons:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.RowLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class SWTHandleTest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setSize(300, 200);
        shell.setText(&quot;Button Example&quot;);
        shell.setLayout(new RowLayout());

        for (int i = 0; i &lt; 10000; i++) {
            Button button = new Button(shell, SWT.PUSH);
            button.setText(&quot;www.eKiwi.de&quot;);
        }

        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }
}
</code></pre></div>
<p>You can check how many handles an application uses in the task manager. You must display the “User objects” column:</p>

<p><img src="http://andydunkel.net/assets/uploads/2011/09/image6.png" alt="image"></p>

<p>*<em>What is the solution? *</em></p>

<p>Well there is none. The limit is hard coded in Windows. So the only way is to change your application design. Only create elements that are visible and remove/dispose elements that no longer need to be visible.</p>

			</div>
			
			<script type="text/javascript"><!--
			google_ad_client = "ca-pub-1137550895446814";
			/* 468x60, Erstellt 21.03.09 */
			google_ad_slot = "2357680339";
			google_ad_width = 468;
			google_ad_height = 60;
			//-->
			</script>
			<script type="text/javascript"
			src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
			</script>
    	</div>
    	
    	<div class="col-md-3" align="center">  
    		<div class="panel panel-default sideBarTop">    			
	    		<script id='fb7sm2s'>(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//api.flattr.com/button/view/?uid=mengenleere&button=compact&url='+encodeURIComponent(document.URL);f.title='Flattr';f.height=20;f.width=110;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fb7sm2s');</script>    		
    		</div>
    	  	
    		<div class="panel panel-default">
	    		<div class="panel-body">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
				<!-- Seitenleiste -->
				<ins class="adsbygoogle"
				     style="display:inline-block;width:160px;height:600px"
				     data-ad-client="ca-pub-1137550895446814"
				     data-ad-slot="1909195079"></ins>
				<script>
				(adsbygoogle = window.adsbygoogle || []).push({});
				</script>		    	
	    		</div>
    		</div>
    	</div>    	
    	
    </div>			

<hr>

<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'andydunkelnet'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>
    
<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(["trackPageView"]);
  _paq.push(["enableLinkTracking"]);

  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + "://piwik.ekiwi.de/";
    _paq.push(["setTrackerUrl", u+"piwik.php"]);
    _paq.push(["setSiteId", "2"]);
    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
    g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Piwik Code -->

    </body>
</html>
